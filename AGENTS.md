# AGENTS.md

Claude Code token usage analyzer. Parses session files, outputs structured data.

## What This Is

Scans `~/` for Claude Code JSONL session files, deduplicates by message ID, aggregates token usage by date. Outputs JSON or interactive HTML calendar.

## Agent Usage

Use `--json` flag for machine-readable output:

```bash
./claude-usage-calendar.py --json -q
```

The `-q` suppresses progress messages, giving clean JSON to stdout.

## JSON Output Schema

```json
{
  "timezone": "PST",
  "date_range": {
    "start": "2025-07-11",
    "end": "2025-12-31"
  },
  "days_with_data": 47,
  "unique_messages": 12345,
  "totals": {
    "input_tokens": 1234567,
    "output_tokens": 2345678,
    "cache_read_input_tokens": 3456789,
    "cache_creation_input_tokens": 456789,
    "total_tokens": 7493823
  },
  "daily_usage": {
    "2025-12-01": {
      "input_tokens": 1234,
      "output_tokens": 5678,
      "cache_read_input_tokens": 9012,
      "cache_creation_input_tokens": 3456
    }
  }
}
```

## Token Types

- **input_tokens** - Tokens sent to model (prompts + context)
- **output_tokens** - Tokens generated by model (responses)
- **cache_read_input_tokens** - Tokens read from prompt cache
- **cache_creation_input_tokens** - Tokens written to prompt cache

## Options

- `--json` - Output JSON instead of HTML
- `--utc` - Use UTC timezone
- `--tz-offset N` - Custom timezone offset (e.g., -8 for PST)
- `--search-path PATH` - Search specific directory (default: ~/)
- `-q` - Quiet mode, suppress progress output
